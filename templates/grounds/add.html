{% extends 'main/base.html' %}

{% block title %}
Добавить площадку
{% endblock %}

{% block script %}
<script src="https://api-maps.yandex.ru/2.1/?apikey=ed9ee632-4f57-4dd1-ad11-59fae15159cd&lang=ru_RU" type="text/javascript"></script>
<script type="text/javascript">
    ymaps.ready(init);
    function init(){
        var myMap = new ymaps.Map("map", {
            center: [55.79717499, 49.10240174],
            zoom: 11
        });

        myMap.events.add('click', function (e) {
            if (!myMap.balloon.isOpen()) {
                var coords = e.get('coords');
                myMap.balloon.open(coords, {
                    contentHeader:'Событие!',
                    contentBody:'<p>Кто-то щелкнул по карте.</p>' +
                        '<p>Координаты щелчка: ' + [
                        coords[0].toPrecision(6),
                        coords[1].toPrecision(6)
                        ].join(', ') + '</p>',
                    contentFooter:'<sup>Щелкните еще раз</sup>'
                });
            }
            else {
                myMap.balloon.close();
            }
        });
    }
</script>
{% endblock %}

{% block maincontent %}
{% if added %}
Площадка успешно добавлена
{% else %}
<form method="POST" enctype="multipart/form-data">
    {% csrf_token %}
    <p>
        <select name="dis" required>
        {% for district in districts %}
            <option value="{{ district.0 }}">{{ district.0 }}</option>
        {% endfor %}
        </select>
    </p>
    <p>
        <input name="sh_desc" type="text" placeholder="Краткое описание" required>
    </p>
    <p>
        <textarea name="ln_desc" placeholder="Длинное описание" required></textarea>
    </p>
    <p>
        <input name="crd" type="text" placeholder="Координаты" required>
    </p>
    <p>
        <input name="img" type="file" accept="image/*" required>
    </p>
    <p>
        <select name="tps" required>
        {% for type in types %}
            <option value="{{ type.0 }}">{{ type.0 }}</option>
        {% endfor %}
        </select>
    </p>
    <button type="submit">Добавить</button>
</form>
<div id="map" style="width: 600px; height: 600px"></div>
{% endif %}
{% endblock %}